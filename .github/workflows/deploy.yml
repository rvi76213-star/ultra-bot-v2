name: Deploy Bot

on: workflow_dispatch

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node 18
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Install deps
      run: npm install
      
    - name: Run bot
      run: |
        if [ -f "src/secure/appstate.json" ]; then
          echo "Starting bot with appstate..."
          timeout 600 npm start
        else
          echo "No appstate, testing only..."
          node -c src/index.js && echo "âœ… Syntax OK"
        fi
